# ----------------------- NT -----------------------
LIBNAME=zexy

current: $(LIBNAME)

PREFIX="C:\Programme\pd"

EXT=dll
CC=cl
LD=link

DEFS=/D__WIN32__ /DPD /DZEXY_LIBRARY
IFLAGS=/I. /I$(PREFIX)\src
AFLAGS= 
WFLAGS=/W3 /WX /nologo

.SUFFIXES: .$(EXT)

include Make.source

## for LinePrinter-support: (if you don't want it, comment it out)
DEFS = $(DEFS) /DZ_WANT_LPT


CFLAGS = /O2 $(DEFS) $(IFLAGS) $(WFLAGS)
LIBS = libc.lib oldnames.lib kernel32.lib $(PREFIX)\bin\pd.lib
LFLAGS = /dll /export:$(LIBNAME)_setup


TARGETS = $(SOURCES:.c=.obj)

.c.obj:
	cl $(CFLAGS) /c $*.c


$(LIBNAME): $(TARGETS)
	$(LD) $(LFLAGS) /out:..\$(LIBNAME).$(EXT) *.obj $(LIBS)

clean:
	-del -f *.$(EXT) *.obj ..\$(LIBNAME).lib ..\$(LIBNAME).exp *.lib *.exp

cleaner: clean
	-del -f *~ _* config.* ..\$(LIBNAME).$(EXT)
